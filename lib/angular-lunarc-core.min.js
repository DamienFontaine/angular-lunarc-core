!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(){angular.module("angular-jwt",["angular-jwt.interceptor","angular-jwt.jwt"]),angular.module("angular-jwt.interceptor",[]).provider("jwtInterceptor",function(){this.authHeader="Authorization",this.authPrefix="Bearer ",this.tokenGetter=function(){return null};var config=this;this.$get=["$q","$injector","$rootScope",function($q,$injector,$rootScope){return{request:function(request){if(request.skipAuthorization)return request;if(request.headers=request.headers||{},request.headers[config.authHeader])return request;var tokenPromise=$q.when($injector.invoke(config.tokenGetter,this,{config:request}));return tokenPromise.then(function(token){return token&&(request.headers[config.authHeader]=config.authPrefix+token),request})},responseError:function(response){return 401===response.status&&$rootScope.$broadcast("unauthenticated",response),$q.reject(response)}}}]}),angular.module("angular-jwt.jwt",[]).service("jwtHelper",function(){this.urlBase64Decode=function(str){var output=str.replace("-","+").replace("_","/");switch(output.length%4){case 0:break;case 2:output+="==";break;case 3:output+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(output)))},this.decodeToken=function(token){var parts=token.split(".");if(3!==parts.length)throw new Error("JWT must have 3 parts");var decoded=this.urlBase64Decode(parts[1]);if(!decoded)throw new Error("Cannot decode the token");return JSON.parse(decoded)},this.getTokenExpirationDate=function(token){var decoded;if(decoded=this.decodeToken(token),!decoded.exp)return null;var d=new Date(0);return d.setUTCSeconds(decoded.exp),d},this.isTokenExpired=function(token){var d=this.getTokenExpirationDate(token);return d?!(d.valueOf()>(new Date).valueOf()):!1}})}()},{}],2:[function(require,module,exports){!function(window,angular,undefined){"use strict";function isValidDottedPath(path){return null!=path&&""!==path&&"hasOwnProperty"!==path&&MEMBER_NAME_REGEX.test("."+path)}function lookupDottedPath(obj,path){if(!isValidDottedPath(path))throw $resourceMinErr("badmember",'Dotted member path "@{0}" is invalid.',path);for(var keys=path.split("."),i=0,ii=keys.length;ii>i&&obj!==undefined;i++){var key=keys[i];obj=null!==obj?obj[key]:undefined}return obj}function shallowClearAndCopy(src,dst){dst=dst||{},angular.forEach(dst,function(value,key){delete dst[key]});for(var key in src)!src.hasOwnProperty(key)||"$"===key.charAt(0)&&"$"===key.charAt(1)||(dst[key]=src[key]);return dst}var $resourceMinErr=angular.$$minErr("$resource"),MEMBER_NAME_REGEX=/^(\.[a-zA-Z_$][0-9a-zA-Z_$]*)+$/;angular.module("ngResource",["ng"]).provider("$resource",function(){var provider=this;this.defaults={stripTrailingSlashes:!0,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}},this.$get=["$http","$q",function($http,$q){function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function Route(template,defaults){this.template=template,this.defaults=extend({},provider.defaults,defaults),this.urlParams={}}function resourceFactory(url,paramDefaults,actions,options){function extractParams(data,actionParams){var ids={};return actionParams=extend({},paramDefaults,actionParams),forEach(actionParams,function(value,key){isFunction(value)&&(value=value()),ids[key]=value&&value.charAt&&"@"==value.charAt(0)?lookupDottedPath(data,value.substr(1)):value}),ids}function defaultResponseInterceptor(response){return response.resource}function Resource(value){shallowClearAndCopy(value||{},this)}var route=new Route(url,options);return actions=extend({},provider.defaults.actions,actions),Resource.prototype.toJSON=function(){var data=extend({},this);return delete data.$promise,delete data.$resolved,data},forEach(actions,function(action,name){var hasBody=/^(POST|PUT|PATCH)$/i.test(action.method);Resource[name]=function(a1,a2,a3,a4){var data,success,error,params={};switch(arguments.length){case 4:error=a4,success=a3;case 3:case 2:if(!isFunction(a2)){params=a1,data=a2,success=a3;break}if(isFunction(a1)){success=a1,error=a2;break}success=a2,error=a3;case 1:isFunction(a1)?success=a1:hasBody?data=a1:params=a1;break;case 0:break;default:throw $resourceMinErr("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var isInstanceCall=this instanceof Resource,value=isInstanceCall?data:action.isArray?[]:new Resource(data),httpConfig={},responseInterceptor=action.interceptor&&action.interceptor.response||defaultResponseInterceptor,responseErrorInterceptor=action.interceptor&&action.interceptor.responseError||undefined;forEach(action,function(value,key){"params"!=key&&"isArray"!=key&&"interceptor"!=key&&(httpConfig[key]=copy(value))}),hasBody&&(httpConfig.data=data),route.setUrlParams(httpConfig,extend({},extractParams(data,action.params||{}),params),action.url);var promise=$http(httpConfig).then(function(response){var data=response.data,promise=value.$promise;if(data){if(angular.isArray(data)!==!!action.isArray)throw $resourceMinErr("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2}",name,action.isArray?"array":"object",angular.isArray(data)?"array":"object");action.isArray?(value.length=0,forEach(data,function(item){"object"==typeof item?value.push(new Resource(item)):value.push(item)})):(shallowClearAndCopy(data,value),value.$promise=promise)}return value.$resolved=!0,response.resource=value,response},function(response){return value.$resolved=!0,(error||noop)(response),$q.reject(response)});return promise=promise.then(function(response){var value=responseInterceptor(response);return(success||noop)(value,response.headers),value},responseErrorInterceptor),isInstanceCall?promise:(value.$promise=promise,value.$resolved=!1,value)},Resource.prototype["$"+name]=function(params,success,error){isFunction(params)&&(error=success,success=params,params={});var result=Resource[name].call(this,params,this,success,error);return result.$promise||result}}),Resource.bind=function(additionalParamDefaults){return resourceFactory(url,extend({},paramDefaults,additionalParamDefaults),actions)},Resource}var noop=angular.noop,forEach=angular.forEach,extend=angular.extend,copy=angular.copy,isFunction=angular.isFunction;return Route.prototype={setUrlParams:function(config,params,actionUrl){var val,encodedVal,self=this,url=actionUrl||self.template,urlParams=self.urlParams={};forEach(url.split(/\W/),function(param){if("hasOwnProperty"===param)throw $resourceMinErr("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(param)&&param&&new RegExp("(^|[^\\\\]):"+param+"(\\W|$)").test(url)&&(urlParams[param]=!0)}),url=url.replace(/\\:/g,":"),params=params||{},forEach(self.urlParams,function(_,urlParam){val=params.hasOwnProperty(urlParam)?params[urlParam]:self.defaults[urlParam],angular.isDefined(val)&&null!==val?(encodedVal=encodeUriSegment(val),url=url.replace(new RegExp(":"+urlParam+"(\\W|$)","g"),function(match,p1){return encodedVal+p1})):url=url.replace(new RegExp("(/?):"+urlParam+"(\\W|$)","g"),function(match,leadingSlashes,tail){return"/"==tail.charAt(0)?tail:leadingSlashes+tail})}),self.defaults.stripTrailingSlashes&&(url=url.replace(/\/+$/,"")||"/"),url=url.replace(/\/\.(?=\w+($|\?))/,"."),config.url=url.replace(/\/\\\./,"/."),forEach(params,function(value,key){self.urlParams[key]||(config.params=config.params||{},config.params[key]=value)})}},resourceFactory}]})}(window,window.angular)},{}],3:[function(require,module,exports){require("./angular-resource"),module.exports="ngResource"},{"./angular-resource":2}],4:[function(require,module,exports){require("./user/UserModule.js"),require("./flash/FlashModule.js"),require("./auth/AuthModule.js");angular.module("lunarc.core",["lunarc.auth","lunarc.flash","lunarc.user"])},{"./auth/AuthModule.js":5,"./flash/FlashModule.js":7,"./user/UserModule.js":9}],5:[function(require,module,exports){require("angular-jwt");angular.module("lunarc.auth",["angular-jwt","lunarc.user"]);require("./services/AuthService.js"),module.exports="lunarc.auth"},{"./services/AuthService.js":6,"angular-jwt":1}],6:[function(require,module,exports){angular.module("lunarc.auth").factory("AuthService",["jwtHelper","User",function(jwtHelper,User){return{user:null,setCredentials:function(){var expToken=localStorage.getItem("id_token"),tokenPayload=jwtHelper.decodeToken(expToken);this.user=new User(tokenPayload.id,tokenPayload.username,tokenPayload.email)},storeToken:function(id_token){localStorage.setItem("id_token",id_token),this.setCredentials()},isAuthenticated:function(){var expToken=localStorage.getItem("id_token");try{jwtHelper.decodeToken(expToken);if(jwtHelper.isTokenExpired(expToken))return this.user=null,!1;this.setCredentials()}catch(err){return!1}return!0}}}])},{}],7:[function(require,module,exports){angular.module("lunarc.flash",[]);require("./services/FlashService.js"),module.exports="lunarc.flash"},{"./services/FlashService.js":8}],8:[function(require,module,exports){angular.module("lunarc.flash").factory("FlashService",["$rootScope",function($rootScope){var queue=[],currentMessage="";return $rootScope.$on("$locationChangeStart",function(event){currentMessage=queue.shift()||""}),{set:function(message){queue.push(message)},get:function(){return queue.length>0&&(currentMessage=queue.shift()),currentMessage},clear:function(){currentMessage=""}}}])},{}],9:[function(require,module,exports){require("angular-resource");angular.module("lunarc.user",["ngResource"]);require("./factories/UserFactory.js"),require("./services/UserService.js"),module.exports="lunarc.user"},{"./factories/UserFactory.js":10,"./services/UserService.js":11,"angular-resource":3}],10:[function(require,module,exports){angular.module("lunarc.user").factory("User",[function(){var User=function(id,username,email){this.id=id,this.username=username,this.email=email};return User}])},{}],11:[function(require,module,exports){angular.module("lunarc.user").factory("UserService",["$resource",function($resource){return $resource("/user/:Id",{Id:"@ID"},{update:{method:"PUT",params:{Id:"@ID"}}})}])},{}]},{},[4]);